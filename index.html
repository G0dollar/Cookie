<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="manifest" href="/manifest.json">
<title>COOKIE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
  margin: 0;
  font-family: "Trebuchet MS", sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  background: linear-gradient(rgba(0,0,0,.2),rgba(0,0,0,.2)), url("wood.jpg");
  background-size: cover;
}

/* BUTTONS */
button {
  padding: 10px 22px;
  border-radius: 12px;
  border: 3px solid #7a4a24;
  background: linear-gradient(#f6e3c2, #e2c89c);
  cursor: pointer;
  transition: transform .1s;
}
button:active { transform: scale(.92); }

/* LOGIN */
#loginBox {
  margin-top: 20px;
  padding: 14px;
  border-radius: 14px;
  background: linear-gradient(#fff8e1, #edd2a5);
  border: 3px solid #8b5a2b;
}

/* STATS */
.stats {
  width: 90%;
  max-width: 600px;
  display: flex;
  justify-content: space-between;
  padding: 12px;
  margin: 12px;
  border-radius: 14px;
  background: linear-gradient(#f6e3c2, #e2c89c);
  border: 2px solid #7a4a24;
}

/* COOKIE */
.cookie-btn {
  width: 200px;
  height: 200px;
  border-radius: 50%;
  border: none;
  margin: 20px;
  background: radial-gradient(circle at top left,#fff5,#0005), url("Cookies.jpg");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  cursor: pointer;
}
.cookie-btn:active { animation: bounce .2s; }

@keyframes bounce {
  50% { transform: scale(.9); }
}

/* PANELS */
.panel {
  position: fixed;
  bottom: 0;
  width: 100%;
  max-width: 600px;
  background: linear-gradient(#fff,#e8e0d0);
  transform: translateY(110%);
  transition: .35s;
  border-radius: 20px 20px 0 0;
  border-top: 6px solid #6b3e1e;
  padding: 14px;
}
.panel.active { transform: translateY(0); }

.close-panel {
  position: absolute;
  top: 10px;
  right: 14px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-weight: bold;
}

/* UPGRADES */
.upgradeWrap {
  display: flex;
  justify-content: space-around;
}
.upgrade {
  width: 170px;
  height: 170px;
  border-radius: 50%;
  text-align: center;
  padding: 12px;
  cursor: pointer;
  display: flex;
  flex-direction: column;
  justify-content: center;
  box-shadow: 0 8px 16px rgba(0,0,0,.4);
  transition: transform .15s;
}
.upgrade:hover { transform: scale(1.05); }
.activeUp { background: radial-gradient(circle,#fff6d5,#e3b872); }
.passiveUp { background: radial-gradient(circle,#d5f0ff,#72b7e3); }

/* ACHIEVEMENTS */
#achievementList li {
  list-style: none;
  margin: 6px 0;
  padding: 10px;
  border-radius: 10px;
  background: linear-gradient(#fff8e1,#edd2a5);
  border: 2px solid #7a4a24;
  opacity: .35;
}
#achievementList li.unlocked {
  opacity: 1;
  background: linear-gradient(#ffe9a8,#ffd36a);
}

/* TOAST */
#toast {
  position: fixed;
  top: -80px;
  left: 50%;
  transform: translateX(-50%);
  padding: 12px 20px;
  background: linear-gradient(#ffe9a8,#ffd36a);
  border: 3px solid #7a4a24;
  border-radius: 14px;
  font-weight: bold;
  transition: .5s;
  z-index: 99;
}
#toast.show { top: 20px; }
</style>
</head>

<body>

<audio id="sClick" src="click.wav" preload="auto"></audio>
<audio id="sBuy" src="Upgrade.wav" preload="auto"></audio>
<audio id="sAch" src="Achievement.wav" preload="auto"></audio>

<div id="loginBox">
  <input id="pinInput" placeholder="Enter PIN">
  <button onclick="login()">Login</button>
</div>

<div class="stats">
  <div>Cookies: <span id="count">0</span></div>
  <div>CPS: <span id="cps">0</span></div>
</div>

<button class="cookie-btn" onclick="clickCookie()"></button>
<button onclick="openPanel('upgrades')">Upgrades ‚Üë</button>
<button onclick="openPanel('achievements')">Achievements üèÜ</button>

<!-- UPGRADES -->
<div id="upgrades" class="panel">
<button class="close-panel" onclick="closePanels()">‚úï</button>
<div class="upgradeWrap">
  <div class="upgrade activeUp" onclick="buyActive()">
    <h3 id="aName"></h3><p id="aDesc"></p><b id="aCost"></b>
  </div>
  <div class="upgrade passiveUp" onclick="buyPassive()">
    <h3 id="pName"></h3><p id="pDesc"></p><b id="pCost"></b>
  </div>
</div>
</div>

<!-- ACHIEVEMENTS -->
<div id="achievements" class="panel">
<button class="close-panel" onclick="closePanels()">‚úï</button>
<ul id="achievementList"></ul>
</div>

<div id="toast"></div>

<script>
/* STATE */
let cookies=0, cps=0, clickPower=1, pin=null;
let aI=0, pI=0;
let unlocked={};

const active=[
 ["Sugar Spoon",25,"+1 CPC",1],
 ["Golden Spoon",120,"+3 CPC",3],
 ["Diamond Spoon",600,"+8 CPC",8],
 ["Magic Whisk",3000,"+20 CPC",20]
];

const passive=[
 ["Grandma",250,"+1 CPS",1],
 ["Oven",1200,"+4 CPS",4],
 ["Bakery",6000,"+12 CPS",12],
 ["Factory",30000,"+35 CPS",35]
];

const achievements=[
 {id:"c1",n:"First Click",d:"Click the cookie once",c:()=>cookies>=1},
 {id:"c10",n:"Getting Warm",d:"Have 10 cookies",c:()=>cookies>=10},
 {id:"c100",n:"Cookie Lover",d:"Have 100 cookies",c:()=>cookies>=100},
 {id:"c1000",n:"Cookie Hoarder",d:"Have 1,000 cookies",c:()=>cookies>=1000},
 {id:"up1",n:"First Upgrade",d:"Buy any upgrade",c:()=>aI+pI>=1},
 {id:"up5",n:"Investor",d:"Buy 5 upgrades",c:()=>aI+pI>=5},
 {id:"cpc25",n:"Click Master",d:"Reach 25 CPC",c:()=>clickPower>=25},
 {id:"cps10",n:"Automation I",d:"Reach 10 CPS",c:()=>cps>=10},
 {id:"cps50",n:"Automation II",d:"Reach 50 CPS",c:()=>cps>=50}
];

const $=i=>document.getElementById(i);
function playClick() {
  const a = document.getElementById("sClick");
  a.currentTime = 0;
  a.play();
}

function playUpgrade() {
  const a = document.getElementById("sBuy");
  a.currentTime = 0;
  a.play();
  }

  function playAchievement() {
  const a = document.getElementById("sAch");
  a.currentTime = 0;
  a.play();
  }
  
/* UI */
function updateUI(){
 $("count").textContent=Math.floor(cookies);
 $("cps").textContent=cps;
 if(active[aI]){
  $("aName").textContent=active[aI][0];
  $("aDesc").textContent=active[aI][2];
  $("aCost").textContent="Cost: "+active[aI][1];
 }
 if(passive[pI]){
  $("pName").textContent=passive[pI][0];
  $("pDesc").textContent=passive[pI][2];
  $("pCost").textContent="Cost: "+passive[pI][1];
 }
 renderAchievements();
}

/* GAME */
function clickCookie(){
 cookies+=clickPower;
 playClick();
 save(); updateUI(); checkAchievements();
}

function buyActive(){
 let u=active[aI];
  if (aI <= 3) {
  if(!u||cookies<u[1])return;
 cookies-=u[1]; clickPower+=u[3]; aI++;
 playUpgrade(); save(); updateUI(); checkAchievements();
  }
  else {
    aName.innerText = "";
    aDesc.innerText = "MAX";
    aCost.innerText = "";
  }
}
function buyPassive(){
 let u=passive[pI];
  if (pI <= 3) {
  if(!u||cookies<u[1])return;
 cookies-=u[1]; cps+=u[3]; pI++;
 playUpgrade(); save(); updateUI(); checkAchievements();
  }
  else {
    pName.innerText = "";
    pDesc.innerText = "MAX";
    pCost.innerText = "";
  }
}

/* ACHIEVEMENTS */
function renderAchievements(){
 let ul=$("achievementList"); ul.innerHTML="";
 achievements.forEach(a=>{
  let li=document.createElement("li");
  li.innerHTML="<b>"+a.n+"</b><br>"+a.d;
  if(unlocked[a.id]) li.classList.add("unlocked");
  ul.appendChild(li);
 });
}

function checkAchievements(){
 achievements.forEach(a=>{
  if(!unlocked[a.id]&&a.c()){
   unlocked[a.id]=1;
   toast("üèÜ "+a.n);
   playAchievement();
   save();
  }
 });
}

function toast(t){
 let d=$("toast");
 d.textContent=t;
 d.classList.add("show");
 setTimeout(()=>d.classList.remove("show"),2500);
}

/* PANELS */
function openPanel(id){
 closePanels();
 $(id).classList.add("active");
}
function closePanels(){
 $("upgrades").classList.remove("active");
 $("achievements").classList.remove("active");
}

/* SAVE */
function save(){
 if(!pin)return;
 localStorage.setItem("cookie_"+pin,JSON.stringify({
  cookies,cps,clickPower,aI,pI,unlocked
 }));
}

function login(){
 pin=$("pinInput").value.trim();
 if(!pin)return alert("Enter PIN");
 let d=JSON.parse(localStorage.getItem("cookie_"+pin));
 if(d)Object.assign(window,d);
 $("loginBox").style.display="none";
 updateUI(); checkAchievements();
}

/* PASSIVE */
setInterval(()=>{cookies+=cps; save(); updateUI();},1000);
updateUI();
  if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
  }
  
</script>
</body>
</html>

